(function(a){a.widget("windowfy.windowfy",{options:{title:"Window",minimize:!0,close:!0,id:"",onClose:function(){this.window.remove()},onMinimize:function(){this.body.toggle()}},_create:function(){var b=this;this.window=a("<div/>").attr({"class":"windowfy",id:this.options.id}).appendTo(this.element.parent());var f=a("<div>").attr("class","windowfy-body").append(this.element);this.body=f;var d=a("<div/>").attr({width:"100%"}),c=a("<div/>").attr({"class":"windowfy-title windowfy-grab"}).html(this.options.title).appendTo(d),
e=a("<div/>").attr({"class":"windowfy-option"}).appendTo(d);this.opts=e;this.options.minimize&&a("<div/>").attr({"class":"windowfy-minimize"}).html("-").on("click",function(){b.options.onMinimize.call(b)}).appendTo(e);this.options.close&&a("<div/>").attr({"class":"windowfy-exit"}).html("x").on("click",function(){b.options.onClose.call(b)}).appendTo(e);this.window.append(d).append(f);this.options.close||this.options.minimize||c.css("width","100%");var g=0,h=0;a(document).on("mousedown",".windowfy-title",
function(k){a(this).removeClass("windowfy-grab");a(this).addClass("windowfy-grabbing");g=k.pageX-b.window.offset().left;h=k.pageY-b.window.offset().top}).on("mouseup",function(){c.addClass("windowfy-grab");c.removeClass("windowfy-grabbing")}).on("mousemove",function(a){c.hasClass("windowfy-grabbing")&&(a.preventDefault(),document.getSelection().removeAllRanges(),b.window.css({left:a.pageX-g+"px"}),b.window.css({top:a.pageY-h+"px"}))})}})})(jQuery);
