(function(a){a("head").append('<link rel="stylesheet" href="windowfy/jquery.windowfy.css" type="text/css" />');a.widget("windowfy.windowfy",{options:{title:"Window",minimize:!0,close:!0,id:"",onClose:function(){this.window.remove()},onMinimize:function(){this.body.toggle()}},_create:function(){var b=this;this.window=a("<div/>").attr({"class":"windowfy",id:this.options.id}).appendTo(this.element.parent());var e=a("<div>").attr("class","windowfy-body").append(this.element);this.body=e;var c=a("<div/>").attr({width:"100%"}),
d=a("<div/>").attr({"class":"windowfy-title windowfy-grab"}).html(this.options.title).appendTo(c),f=a("<div/>").attr({"class":"windowfy-option"}).appendTo(c);this.opts=f;this.options.minimize&&a("<div/>").attr({"class":"windowfy-minimize"}).html("-").on("click",function(){b.options.onMinimize.call(b)}).appendTo(f);this.options.close&&a("<div/>").attr({"class":"windowfy-exit"}).html("x").on("click",function(){b.options.onClose.call(b)}).appendTo(f);this.window.append(c).append(e);this.options.close||
this.options.minimize||d.css("width","100%");var g=0,h=0;a(document).on("mousedown",".windowfy-title",function(c){a(this).removeClass("windowfy-grab");a(this).addClass("windowfy-grabbing");g=c.pageX-b.window.offset().left;h=c.pageY-b.window.offset().top}).on("mouseup",function(){d.addClass("windowfy-grab");d.removeClass("windowfy-grabbing")}).on("mousemove",function(a){d.hasClass("windowfy-grabbing")&&(a.preventDefault(),document.getSelection().removeAllRanges(),b.window.css({left:a.pageX-g+"px"}),
b.window.css({top:a.pageY-h+"px"}))})},addOption:function(b,e){var c=this;a("<div/>").attr({"class":"windowfy-option"}).html("x").on("click",function(){c.options.onClose.call(c)}).appendTo(this.opts)}})})(jQuery);
